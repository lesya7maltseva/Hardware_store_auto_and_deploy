Инструкция по запуску проекта.
Для запуска вам потребуется настроенный сервер, субд PostgreSQL. Работа производится от пользователя root.

Настройка сервера.
Для работы проекта на сервере должны быть установлены: python3, venv, pip, postgres Если у вас всё это установлено, пропустите этот раздел.

Если сервер чистый: проверим наличие python3 
python3 --version

для проверки наличия pip воспользуйтесь командой 
pip freeze

далее установим pip командами:
apt update
apt install python3-pip

сразу установим виртуальное окружение командой 
apt install python3 venv 

после этого установим postgresql
apt-get -y install postgresql

Немного о конфигурации проекта.
В файле config.ini лежат параметры проекта. 
Раздел Sales_data содержит словарь Shops в нем ключом является порядковый номер магазина, а значением число касс в нем. 
Reciepts - отражает количество чеков в одной выгрузке. 
В разделе DATABASE параметры подключения к базе данных.
Если вам необходимы другие параметры - внесите изменения в этот файл.

Деплой
На сервере перейдите в папку home (если будете делать в другой папке, нужно будет в crontab поменять название первой папки в том числе - см. в разделе Автоматизация)

Чтобы загрузить проект на сервер введите команду:
 git clone https://github.com/your_git_profile/Hardware_store_auto_and_deploy.git


Затем перейдите в папку проекта Hardware_store_auto_and_deploy

Для того чтобы не скачивать все библиотеки на сервер воспользуемся виртуальным окружением.
Создадим папку командой:
python3 -m venv venv


Активируем виртуальное окружение:
source venv/bin/activate


Устанавливаем зависимости
pip install -r requirements1.0.txt

Для подключения к базе данных изменим пароль пользователя posgtres
Сменим пользователя командой:
su postgres

Подключимся к постгре командой:
psql -U postgres

Меняем пароль командой:
ALTER USER postgres WITH PASSWORD 'my35town48'('или ваш пароль');

Выходим командой:
exit

Переключимся на пользователя root командой: 
su

Потребуется повторный ввод пароля сервера

Создание Базы данных:
Настройте новое соединение Postgres и создайте базу данных
Для создания базы данных используйте скрипт из папки sql в git-репозитории проекта.

База данных будет содержать 2 таблицы shops с адресами магазинов и sales с с данными о продажах.
Скрипт который переносит данные о продажах в БД предусматривает внесение данных о магазине. Либо вносите предварительно в БД данные, либо вносите их при первой активации скрипта.

Автоматизация
Для автоматизации использован crontab 
необходимые команды можно найти в папке img файл crontab в git-репозитории проекта.
Откройте дополнительно подключение к серверу, либо выйдите из виртуального окружения командой 
deactivate


Для того чтобы открыть crontab потребуется команда:
EDITOR=nano crontab -e

в открывшемся редакторе повторите команды из скрина crontab 

Скрипт генерации продаж работает в течении 1 минуты в 7 утра с понедельника по субботу
Скрипт переноса в базу данных работает в течение 1 минуты в 8 утра каждый день.

На этом этапе если вы поместили проект не в папку home, замените название home на свою папку. 
Сохраните изменения в crontab (Ctrl+O, Enter) и закройте его(Ctrl+X)
